macos:
  xcode: 15.0.0
resource_class: macos.x86.medium.gen2
steps:
  - checkout
  - mapbox/install-mbx-ci
  - run:
      name: Push git subtree changes
      command: |
        GITHUB_TOKEN=$(mbx-ci github writer public token)
        git subtree push -d --prefix=mapbox-maps-ios "https://x-access-token:$GITHUB_TOKEN@github.com/mapbox/mapbox-maps-ios.git" "$CIRCLE_BRANCH" &> subtree.log
  - store_artifacts:
      path: subtree.log
