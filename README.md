# mapbox-maps-ios-internal

Private tooling for working on the iOS Maps SDK.

* [Debuggable Environment](debug-env)
* [Fat Framework Script](fat-framework)

## Code generation

In Maps SDK v10, the style extension, annotation plugin and plugin configuration classes are generated by code generator, for more info, please refer to Map Style Specification Generator [devlog](https://github.com/mapbox/hey/issues/7339)
In the latest internal refactor, we have moved the template files from mapbox-maps-stylegen repo to the mapbox-maps-android-internal repo, but kept the spec parsers inside mapbox-maps-stylegen as a submodule, to be able to reuse these parsers with iOS and ensure alignment across platforms.

### Steps to make changes to code generator
0. Run `git submodule update --init --recursive` in the root directory of `mapbox-maps-ios-internal` to get the latest `mapbox-maps-ios` and `mapbox-maps-stylegen` dependency.
1. Update generator templates in codegen folder, and run `make generate-style-code`/`make generate-annotation-code` to generate changes to `mapbox-maps-ios` submodule.
2. Create a branch in `mapbox-maps-ios`, commit and push the changes to create a public PR inside `mapbox-maps-ios`.
3. Create a branch in `mapbox-maps-ios-internal`, commit all the changes inside `mapbox-maps-ios-internal` (including submodules) and push the changes to create an internal PR inside `mapbox-maps-ios-internal`.
4. Review and merge the public PR in `mapbox-maps-ios`.
5. Update submodule pin to `mapbox-maps-ios` in `mapbox-maps-ios-internal`, review and merge the internal PR in `mapbox-maps-ios-internal`.


## Release management

The Mapbox Maps SDK for iOS makes stable releases every 6 weeks. Beta build is available in week 2 and a release candidate in week 4, which is promoted to stable in week 6.

We release on a schedule to provide a level of predictability for our customers. Having a cadence that the team can rely on gives transparency and provides a rhythm that becomes second nature.

### Why do we provide pre-releases?
We provide pre-releases during development to enable the community and our customers to provide feedback.

### What is the beta release?
The beta release is a pre-release that exposes initial APIs, behaviors of upcoming features for early feedback. We make this release during week 2 of the release cadence.

### What is the RC release?
We finalize the scope of the beta release during week 4 of the cadence. We normally do not introduce any new APIs however bug fixes could land, and the RC is then promoted to stable in week 6.

### What type of versioning does Maps Mobile use?
We use the standard semantic version scheme ([SEMVER](https://semver.org/)) x.y.z to differentiate between major, minor, or patch releases. We treat stable release as a new major or minor release and not patch release.
Where “x” represents the major releases where incompatible API changes occur “breaking changes”.
“y” represents minor releases where we add functionality in a backward-compatible manner.
And “z” represents patch releases where we make backward-compatible bug fixes.

### Understanding release management in Git terms
As soon as time has come to prepare new beta release, we cut the new Git branch `v[major].[minor]` from latest `main`. Beta, RC and stable releases are always cut and published from this branch.

Any bug fix / feature _related_ to the `v[major].[minor]` release (when beta has already been released) will always be merged to `main` firstly and then either merged / cherry-picked to the `v[major].[minor]` branch.

All bug fixes / features _not related_ to the `v[major].[minor]` release (when beta has already been released) will be simply merged to `main` and included in the _next_ release.

#### Preparing patch release
If there is the necessity to prepare the patch release for `v[major].[minor]`, we release it from associated `v[major].[minor]` branch with correct `v[major].[minor].[patch]` tag and _not_ from separate patch branch.

Preparing patch checklist:
- cut patch branch from `v[major].[minor]` branch.
- add patch bug fixes / features, updated the changelog.
- merge the patch branch to `v[major].[minor]`, delete the patch branch, and start patch release process by creating `v[major].[minor].[patch]` tag on `v[major].[minor]` branch.
- backport PR to `main` branch with changes for the patch release.
  We have helper script for this step at [git-port-pr-to-release.sh](scripts/git-port-pr-to-release.sh).

### Release management visual representation

![mapbox-release-pipeline](https://user-images.githubusercontent.com/15800566/144036106-027e6105-164e-4e91-bb40-a0d7af0fba17.jpeg)

Diagram could be edited and viewed by following [link](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1#R7V1tc6M4Ev41qbr7MJTeJT5OMpm5l92tqZur2tn9ckVsYnPrmCwmM8n9%2BpNssA0NtoxBYA%2FzYRIULIO69XTr6Vbrht49vX5Kguf5z%2FE0XNwQNH29oR9uCCE%2BxfqHaXnbtGBB%2FU3LLImmWduu4Uv0vzBrRFnrSzQNV4Ub0zhepNFzsXESL5fhJC20BUkSfy%2Fe9hgvit%2F6HMxC0PBlEixg66%2FRNJ1vWhWRu%2Fa%2FhdFsnn8zFtn7PQX5zdmbrObBNP6%2B10Tvb%2BhdEsfp5ren17twYUYvH5fN5z7W%2FHX7YEm4TG0%2B8PeXP9ksYL8j%2BYti%2FO0fU%2F%2B9eJf1skrf8hcOp%2Fr9s8s4SefxLF4Gi%2Ftd6%2B3kJfkWmk6xvkjil%2BV0fYX01Tx9WmR%2FCJfT92b89eUyXoablo%2FRYpHd%2Bt8wTd8yeQcvaaybdl%2F3Uxw%2FZ%2F2s0iT%2BYzv2TLc8xss0%2ByDm637T5O2r6dZDSOUNv60bGJd5w4fX7Js3V2%2F7V5%2FDJHoK0zDJG1%2Bj9Gv%2BIvr3TWc8u9r1ZC7e9i7K%2FUAZ5QMevyST8IBgFMmUPUhmYXrgRsk3Nxq57X1FpgOfwlg%2FT%2FKmb0jCRZBG34p6HWTTY7a9b%2FvRz3GkH5qgbC4zjD2VaX02mTkq9bJ5q%2ByD%2B6pY6oszXu5LEVXsa%2FPioC%2F9y95b7ZrWyn6C4mfD%2By1YvGQj0mAm1Cp%2Fc%2BU%2BNm1WelzS0h3na9lR5cmVAPkeJoeV4LgqUSFaUyVGj%2FfVsSpRoEpPQbQE6pSGr2lRSzbSv4sXcbIT5qOWdakpWESzpb6caPkaaLn9FiZppG3U%2B%2BwPT9F0ulbI7%2FMoDb88B2uhf9cm2SievvtxsdaXub4vXJYgdAup2aPi7Ppj8BQtzJDeaVFE%2BnsJ%2BiX8fkjdzGOFrzZ6RAiQGlOZnfy%2BM7M8a5rvWVhG6tWtINlTxci6M4UHrQmwPT0YzqLR3P7tFJPZLjDlVu2o%2BcPUjfkThHi0ZLIEcoozHODMN%2B%2Br95tuekiC5WTeAeIswsf0SvFGaYESDiFHQsjhfkeQI872OSpnfgVCFBzzbNbjFmb9cXelDEIFyMyRMfef3fvZzBZorF2lM4GGE%2BWJoovFSAloapyjtoBGtmsJm%2BhoS%2BuvVi3c6bp%2BENbMH3PYvSEUId9HB3W5c83jvKx51OfN3HIhydG%2BOjaXCpjLX8PwD90CV3pDds1bsH4MA%2BtHJAOmT1Z422Xkac30%2BUA6nyKjP7drVyZazvTvPwfPK%2F3jy4d%2FDkZiRWTbkxWlVVPa%2FGtHhr72YEorb1y1YqKqYsnUlRBzkrZNFqWBtYDrmlOBui170%2FIiCLkBfoItCJkatIbIzxuTO20hP8ZALf8dzG7oe%2FMIy2kSR1OzcHr3EKaBBxnwK7cGlBvNLiyFlA%2BAhKCKhVBn1iBHtp7p2OdFEC3fPayfoQGKFNVk3wC064deTnAidwFt%2BWWOIb%2BMT%2BdqkCpzNY3hjGs4KzmyzuEMEsxgcuRA81PwEC4%2Bx6sojWIDOA9xmsZPFUiUGqWHGFdQ53nwbLp%2Fep2Z4K5nsGky1wbOi5fvTODzP0n4GGrtMbpSnDv6A9MoLDhD9%2B%2FFrRBVs%2BRWccZRCVF1%2B0d1d3931w7oSYwAAcQg%2B0MrXGDaGeh1yDhfJoc8AGRjlsjminfmEizKJRdW%2BGPjmknmNuyK%2BajzQ9N5V6osLUIotqoslew7HIPFCauMH45zkoQBg5uP2J7BxUx5eazPzUpDWqw0AJJMg9V8i0B7IjPtn4NUi2G5biGIAgQhALT2Epb4PoLgI%2FhRK5bjwQvLGX4k9p63nZtKxEEqEUaqIRJUdEaRY6MGqeYGVq7lZCJiYRILat1yZhGzVLkcTSAFRdABEKhhspQPvSXmsYbJRVVPpftzq1yQKc%2FiGHD5cOU2RVFeZgd6j2MQSIFn4oHB%2FSsXD6Zol1IxGPlALti5vT8JWQdio5VkHse%2BjzGiBBFVYoxZw7iwkoCHIb7jzF8brvnSPMABaU1rnp3prGTMlXSbQ0Ag9Vq5xksmP14cSWG5Xbrl4vElQHuzwsuNthvEH2lV1xRT18yRUbW2mCPFwRLBNXNEYCbv6JNYqAGmjHlECr0qI9hX%2BU7CrU%2FCvIZeie4YuCW0vPrsWikgnTgqha1SAJ%2BjaYhk3RtDJjtccolxTllu%2FQ%2BgYzVqoUcxeNu77dncsDr1NVRhS6f%2BZdNtu4oHGdEqH%2BdHc28wUQgYnSoGmxC3DHa%2BUXL0b4YTQssn7lEintoy8Weiok9B2Fio0jrbGhMR3GMpy5Rq19bRH5XesdIPRpcVJPUbe%2F%2BGzeo7cJwnFI26PBwAd6XLGAkC4uKNlRkT7knqb%2F%2BpfvXaMu36RyTLMJK%2BRwXa%2FsPHHUsmPI4dOpa0YsH54%2BBS7%2BZUuoIgzE9CDfulM%2FGBaeW%2B5Xq5NRC6oGTp55fkeT2JyunS2Ryp309QypT%2BwO%2FVh7YStxSg9ZmC6OQ0U5qy40Id95k1dn5y5%2Fq4x%2B8oUxRzGEdsviGNAh7H9Q4OakH4j6B0yH3CGChE%2F6hkw9iPqNR4SUZtUclRBbxWUUn6uO99ZdQiFXooqNTJvrJplIST7IX0WJsHbGetR0BKcv9gZZGjfNXCbkewHKxw%2Bt5FSJsw4y0UkWql7lN79X08RFhxxU%2FVtuEULrK5wWJiYG60RCAIZFtKCvYFiwMxxwV98jImexD2GAbpSxLedFgC76qLblKJAXoJURnP7q7uJiSDf9AqeO80ivkFRGRStMdAtrf52V0tPBh4bkpPag8MOO%2FlJ%2BoawHpZHw5R09HNeXa%2FuY5bc13WG9jOLSxrUazEuq46gjruOFGDQf59HqeP0etooxvaaJmz333a6A4IePc7XGvlY7tJlVIQvGe%2B8BjaBdPyHRAn7Fn1kSdwXTiO%2BtxjGMSNT9%2FJKmnTgpynprKuXwh8VdUo1T0tFSf20E1mLBtp%2B%2FPQjBNYUbaiaKVTvoRZsPajUA8Itaq0b%2B9ChVT26HWc5XUIAUXq3OuoLeEMU%2BCHLM4WJISlAEcm9b63nsHSFNArHLcswUCiQhV7fcpFa6zzrkxvTNU6kI73sXHI0n776v3FHFNyQ7RoEP5rB5P3Wg4qwQJxz68VptYSOOd931MVVb87m%2FZ5UqrltJ8sgtUqmhzyj46ObN1ZCU3iSLVSOsod5ao9FBgx8R0AI3lV0ZNhpMLCwN66Bg9SoVpiYab26jlYFnRM%2FPlijs68NeDxLsMBk2qe2fHt3%2FVvM%2FPTaNJ6zMNgtR8xQpE5ZGCShEGqrUr2bQ9J%2FrG8Rb%2FP5hHy5ovAMFLCMFQ1mdo7pWADX%2F6OriAlfao4cQmr3SLRyakFfEwRPtcZxSB5qfcEF94BRTlm4%2B2GN%2FP1j8ZNuKPkBlOa%2FWgGnW02HsZw973rdDzecmnkywsVNnIBq9S8SZix%2BdSQQ5saWPrMEzBosPPqaEMfUXDadxCdNzk0cXC71HKM95AkBSVlAh9U0yNZcCdVk2s5%2F82%2BCIJ0Mw98Vj7phjbNHvGZBB6PdFu3kFuka19O5qfJdWK0PdVvw2K5UH1HJkCJivMXZTPdVwhEY5njmp38aitsu2WwlC2DlTvZDEYdyjy1zflyiHt5Wcb9ncGY6Z9y838z3ayq0K3K5zV3rZwWYZCRTzjEJ%2Bil1uD4BAHjGH2Y22vlE6jtudv57Op%2B0USAi3fRfIKwCNOMsHQIlgg8e6t%2FWCKXI9Wh7uMzhwEOTq5j3nTLGUy8IinNdQaTGPOm17OGgmWERNIjfv2w16UWgyxmgQTo6JzVg0ClpUhrWdGHHr0%2BE9riU91kP4sLyn4eqqXBPkzR4D7p2dSMGdBnSlVBPOvfgRgGPXyt61VuW40mn139xL%2BRt7dFxpKkrVgKc1zYksRO%2BZaul7VXUf689foX%2BUUv4Q9hW%2FlCuCrVJDn1ENvpKC06n0wWNLih%2B1hl3YXjs0fFVRRGv7LpYMttSttwzNkbDhR0Q8vdWC%2BaUIVPS9xqvbQg54fiwg53beKrwXmx0oK0Hr3Y7g21K2RqN4tTwS0MrqMusom%2BjvZ4GPZY2fKa59pjnxtF3SVoFt1TQRueY0cQBpDuOj9T2h2Z6v0O5smQ4xkt2FtzijJIVVE%2BsLfODxSTVxGkqEyuaog%2FtdI%2BjiC9JFhhyqFqlbOg7EFEnpqt1TWkWEQiknn89PCyqpni%2B5jyR5hO5pmgS%2B71Lb%2BnH%2B8rTWQLAMAo2Z6EnI8rVdu5vgcBjNaEKcuHabSHARYxgQsYYqnQdi%2F04IbYgqC%2FgCGuKsU%2FnDG2yBO%2BhDGmBIR9zRhX7J7tYYwt0l0vYYylIge2Kvs%2BGYZKKwuq6wKGW3s1h5Y8g9FuZUFAjczi6cxi73Xy85rFFyzYigXwfmZDfS5ECzKlDGRK9U4WK4tCDs4Xrsxi4Vorj%2FYqb28z71B5zcF8Wi%2BPmiWhkk15VZjRxkFf4InaSrmrf%2BxOM%2BeUBaEycKjp3YZwSIxIBhN63eKNBQ9hX%2B%2BuXMcOsl8ZeWW2ysrCxm7kUUqbcOjbwgimxliB3Kcij1q1UIV9IAWyiPbhleKSFdM8cnXi1COqYdE9zsACzfRXziTpmBhT18HaKA7PZB8Ko6AsWJsRy4%2FI1xdlJ0SIvpcDHewo%2F3ESDTpPC6jYmGFdjLAiL4CIAydem3o4ZfyosQMne6AILpu271EfgDn%2BoW4cV%2F%2BC0qoGuTOgYhsaRn1DnT9SWp0IFve9Hsk3El24%2B7fNbMgHdtvQq%2BfnQ3YpCWcviyDRjZP46SlKwWgPsggs6WVDrgKV4jDi23pchXwXCuVaTl5oT6qQm9nusx6F2kComPD%2BhQqJmV2d5zSYjSI9SaRaqFWLb8cyteA2OiDb2shUdcSyHQ8W2NZZdEXHUU9gLnkeAi7WZhQKeYI15uOYR8v9Ya%2BcSNsxH%2Bfb7MFtT2dbWvnXKph12cOBKBim5sBro2FAsXhToreyRITCbtXKhqu6wAM3BqI2FZU5FFee9JtpDIOHsLquSJiHIbo4RkP%2FDJ6MN7N8WJkf%2FxoP1OjwQA29FPbQ3r9iJW%2BV55R2c5yGvkxiI%2Fydbhoi5%2Bd4Gpo7%2Fg8%3D).
